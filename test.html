
<!doctype html>
<html>
	<head>
id		<meta  charset="utf-8"/>
		<meta name="keywords" content="前端菜鸟 前端工程师 蜗眼" />	
		<meta name="description" content="游离于互联网的前端工程师，关注创新前端技术，关注自实现现有技术" />
		<meta http-equiv="imagetoolbar" content="no" />
		<meta name="title" content="蜗眼的文章列表" />
		<title> @蜗眼-首页</title>
		<style>
			html,div,ul,li,ol,dl,dt,dd,h1,h2,h3,h4,h5,h6,h7,p,span,pre,code,blockquote{padding:0;margin:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent;}body{font-family:Georgia,'Nimbus Roman No9 L','Liberation Serif',serif;font-size:16px;color:#E6EAED;}p{line-height:1.6em;margin-bottom:1.25em;}blockquote p{margin-bottom:0.25em;}html{background:#0D2E4C;}h2{font-size:1.5em;margin:0 0 0.7em;padding-top:1.5em;}h2,h3{font-family:Arial,sans-serif;text-shadow:0 1px 1px black;}a{color:orange;text-decoration:none;}a:hover,a:active{color:#FFC76D;}pre,code,blockquote{font-family:Consolas,Inconsolata,'Bitstream Vera Sans Mono',Menlo,Monaco,'Andale Mono','Courier New',monospace;}blockquote,pre{padding:8px 10px 12px 20px;border-left:4px solid #566D82;margin-bottom:1.25em;margin-top:1.25em;background:#0F192A;border-radius:4px;}.inr{opacity:0.7;line-height:20px;}hr{border-bottom:1px dashed #CCC;border-top:none;}.clearfix:after{content:"\0020";display:block;height:0;clear:both}.clearfix{_zoom:1}*+html .clearfix{overflow:hidden}.main{border-bottom:4px dotted #8696A5;margin-bottom:25px;padding-bottom:40px;}.footer{border-top:4px dotted #8696A5;padding:10px 0 45px 0;font-size:12px;color:#ccc;opacity:0.5;filter:alpha(opacity=50);}.article code{background:#314D67;padding:3px 4px 1px;border-radius:3px;}.article pre code{background:none;}.wraper{width:740px;margin:0 auto;}.content{width:560px;float:left;}.nav{padding:130px 0 0 0;width:180px;float:right;}.index .nav{padding-top:150px;}.nav dt{text-shadow:0 1px 1px black;padding:10px 0 5px 0;border-bottom:1px dashed #ccc;display:inline-block;*display:inline;zoom:1;margin-bottom:5px;font-weight:bold;border-radius:7px;cursor:default;text-transform:uppercase;}.nav dl{padding-bottom:10px;}.nav dt.title{display:block;border:none;padding:5px 0;}.nav dt.title a{padding:2px 5px 2px 0;border-radius:0 9px 9px 0;-moz-transition-property:background-color,color;-moz-transition-duration:0.5s;-webkit-transition-property:background-color,color;-webkit-transition-duration:0.5s;-o-transition-property:background-color,color;-o-transition-duration:0.5s;}.nav dt.title a:hover{background-color:#344F68;}.nav dd{padding:2px 5px 2px 1em;text-transform:uppercase;}.nav dd a{padding:2px 5px;border-radius:9px;-moz-transition-property:background-color,color;-moz-transition-duration:0.5s;-webkit-transition-property:background-color,color;-webkit-transition-duration:0.5s;-o-transition-property:background-color,color;-o-transition-duration:0.5s;color:#FFC76D;}.nav dd a:hover{background-color:#344F68;}.index h1{padding:40px 0 30px;margin:0;font-size:75px;line-height:1.2em;font-weight:normal;text-shadow:0 2px 2px black;font-family:Georgia,serif;}.post h1{padding:60px 0 25px 0px;font-size:1.9em;text-shadow:0 2px 4px #ddd;padding-top:1.5em;margin-bottom:30px;}.post h2{font-size:1.3em;margin:0 0 0.4em;padding-top:1.3em;}.post p{text-indent:2em;}.article{position:relative;}.aside{position:absolute;top:0;right:-200px;width:180px;margin:0;font-size:0.8125em;font-family:Arial;line-height:1.3em;border-bottom:1px solid #9EABB7;padding-bottom:0.625em;opacity:0.5;filter:alpha(opacity=50);-moz-transition:opacity 0.3s;-webkit-transition:opacity 0.3s;-o-transition:opacity 0.3s;}.new{color:#ccc;font-size:16px;opacity:0.5;filter:alpha(opacity=50);}div.aside ul{list-style:none;}.article .aside:hover{opacity:1;}.article li{font-size:0.9375em;margin-top:6px;line-height:1.5em;}.article ul{list-style:square;}.alist{margin-bottom:50px;border-top:1px dashed #8696A5;margin-top:50px;}.alist h3{line-height:50px;}ol ul,ul ul,ol ol,ul ol{margin-left:20px;}pre{font-family:"Consolas","Courier New",Courier,mono,serif;overflow:auto;margin:18px 0;color:#666;font-size:16px;}pre ol{padding-left:24px;}.article pre ol li{line-height:1em;margin-top:0px;}pre ol li div{color:#fff;}pre ol .comments,pre ol .singlecomments{color:#61615d}pre ol .keyword{color:#688fb8}pre ol .builtin{color:#c25c03}pre ol .string,pre ol .number{color:#d0a022}#fly{position:fixed;height:109px;width:64px;background:url(../rocket.png) no-repeat right top;right:50%;margin-right:400px;bottom:50px;cursor:pointer;opacity:0.5;filter:alpha(opacity=50)}#fly:hover{background-position:left top;opacity:1;filter:alpha(opacity=100)}#fly.flying{background:url(../rocket_flying.gif) no-repeat left top;opacity:1;filter:alpha(opacity=100)}.MeAbout li{display:inline-block;padding-right:45px;}.MeAbout h3{color:#ccc;opacity:0.5;font-weight:normal;filter:alpha(opacity=50);padding-bottom:10px;padding-top:20px;}.resume p{padding:0;margin-bottom:0;}.resume ul{padding:10px 0;}.resume li{list-style:none;position:relative;padding-left:80px;}.resume li label{display:block;width:70px;position:absolute;top:0;left:0;padding-right:10px;}strong,.MeAbout li a{display:inline-block;transform-origin:center center;}.MeAbout li a:hover{animation-name:abase;animation-duration:100ms;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-delay:0s;}strong{animation-name:alittle;animation-duration:100ms;animation-iteration-count:infinite;animation-timing-function:ease-in-out;animation-delay:0s;}@keyframes abase{0%{transform:translate(0px,0px) rotate(0deg);}2%{transform:translate(0.5px,-0.5px) rotate(0.5deg);}4%{transform:translate(-0.5px,-2.5px) rotate(-1.5deg);}6%{transform:translate(0.5px,-0.5px) rotate(-0.5deg);}8%{transform:translate(-2.5px,0.5px) rotate(0.5deg);}10%{transform:translate(-1.5px,-1.5px) rotate(0.5deg);}12%{transform:translate(1.5px,0.5px) rotate(-1.5deg);}14%{transform:translate(1.5px,-2.5px) rotate(-0.5deg);}16%{transform:translate(-2.5px,-1.5px) rotate(-0.5deg);}18%{transform:translate(-0.5px,0.5px) rotate(-0.5deg);}20%{transform:translate(-1.5px,1.5px) rotate(0.5deg);}22%{transform:translate(-1.5px,-2.5px) rotate(-1.5deg);}24%{transform:translate(0.5px,0.5px) rotate(-1.5deg);}26%{transform:translate(-1.5px,1.5px) rotate(0.5deg);}28%{transform:translate(0.5px,1.5px) rotate(0.5deg);}30%{transform:translate(-0.5px,-1.5px) rotate(-1.5deg);}32%{transform:translate(-2.5px,1.5px) rotate(-0.5deg);}34%{transform:translate(-1.5px,1.5px) rotate(-1.5deg);}36%{transform:translate(-2.5px,-0.5px) rotate(0.5deg);}38%{transform:translate(-2.5px,-2.5px) rotate(-1.5deg);}40%{transform:translate(-0.5px,-0.5px) rotate(-0.5deg);}42%{transform:translate(-1.5px,1.5px) rotate(0.5deg);}44%{transform:translate(0.5px,1.5px) rotate(-0.5deg);}46%{transform:translate(1.5px,1.5px) rotate(-0.5deg);}48%{transform:translate(-2.5px,1.5px) rotate(0.5deg);}50%{transform:translate(0.5px,1.5px) rotate(-1.5deg);}52%{transform:translate(-1.5px,-2.5px) rotate(0.5deg);}54%{transform:translate(1.5px,-1.5px) rotate(0.5deg);}56%{transform:translate(1.5px,0.5px) rotate(-1.5deg);}58%{transform:translate(-2.5px,1.5px) rotate(-1.5deg);}60%{transform:translate(0.5px,0.5px) rotate(-0.5deg);}62%{transform:translate(-2.5px,-1.5px) rotate(0.5deg);}64%{transform:translate(0.5px,0.5px) rotate(-1.5deg);}66%{transform:translate(1.5px,-0.5px) rotate(-1.5deg);}68%{transform:translate(0.5px,1.5px) rotate(-0.5deg);}70%{transform:translate(-1.5px,-2.5px) rotate(-0.5deg);}72%{transform:translate(-1.5px,0.5px) rotate(0.5deg);}74%{transform:translate(0.5px,-0.5px) rotate(0.5deg);}76%{transform:translate(1.5px,-0.5px) rotate(-0.5deg);}78%{transform:translate(-1.5px,1.5px) rotate(-0.5deg);}80%{transform:translate(-0.5px,-1.5px) rotate(-0.5deg);}82%{transform:translate(1.5px,-1.5px) rotate(-0.5deg);}84%{transform:translate(0.5px,1.5px) rotate(0.5deg);}86%{transform:translate(0.5px,-0.5px) rotate(0.5deg);}88%{transform:translate(-2.5px,1.5px) rotate(-0.5deg);}90%{transform:translate(-1.5px,-0.5px) rotate(-0.5deg);}92%{transform:translate(0.5px,1.5px) rotate(-0.5deg);}94%{transform:translate(0.5px,1.5px) rotate(-0.5deg);}96%{transform:translate(-1.5px,1.5px) rotate(-1.5deg);}98%{transform:translate(0.5px,-0.5px) rotate(-0.5deg);}}@keyframes alittle{0%{transform:translate(0px,0px) rotate(0deg);}2%{transform:translate(-1px,-1px) rotate(-0.5deg);}4%{transform:translate(-1px,0px) rotate(-0.5deg);}6%{transform:translate(0px,0px) rotate(-0.5deg);}8%{transform:translate(-1px,-1px) rotate(-0.5deg);}10%{transform:translate(0px,-1px) rotate(-0.5deg);}12%{transform:translate(-1px,0px) rotate(-0.5deg);}14%{transform:translate(0px,0px) rotate(-0.5deg);}16%{transform:translate(0px,0px) rotate(-0.5deg);}18%{transform:translate(-1px,-1px) rotate(-0.5deg);}20%{transform:translate(0px,0px) rotate(-0.5deg);}22%{transform:translate(-1px,0px) rotate(-0.5deg);}24%{transform:translate(-1px,-1px) rotate(-0.5deg);}26%{transform:translate(0px,0px) rotate(-0.5deg);}28%{transform:translate(-1px,-1px) rotate(-0.5deg);}30%{transform:translate(0px,0px) rotate(-0.5deg);}32%{transform:translate(-1px,0px) rotate(-0.5deg);}34%{transform:translate(0px,-1px) rotate(-0.5deg);}36%{transform:translate(-1px,0px) rotate(-0.5deg);}38%{transform:translate(-1px,-1px) rotate(-0.5deg);}40%{transform:translate(0px,0px) rotate(-0.5deg);}42%{transform:translate(-1px,-1px) rotate(-0.5deg);}44%{transform:translate(-1px,0px) rotate(-0.5deg);}46%{transform:translate(-1px,0px) rotate(-0.5deg);}48%{transform:translate(-1px,0px) rotate(-0.5deg);}50%{transform:translate(-1px,0px) rotate(-0.5deg);}52%{transform:translate(0px,0px) rotate(-0.5deg);}54%{transform:translate(0px,-1px) rotate(-0.5deg);}56%{transform:translate(-1px,-1px) rotate(-0.5deg);}58%{transform:translate(-1px,0px) rotate(-0.5deg);}60%{transform:translate(0px,-1px) rotate(-0.5deg);}62%{transform:translate(-1px,-1px) rotate(-0.5deg);}64%{transform:translate(0px,-1px) rotate(-0.5deg);}66%{transform:translate(0px,-1px) rotate(-0.5deg);}68%{transform:translate(-1px,0px) rotate(-0.5deg);}70%{transform:translate(0px,-1px) rotate(-0.5deg);}72%{transform:translate(0px,-1px) rotate(-0.5deg);}74%{transform:translate(-1px,0px) rotate(-0.5deg);}76%{transform:translate(-1px,0px) rotate(-0.5deg);}78%{transform:translate(0px,0px) rotate(-0.5deg);}80%{transform:translate(0px,0px) rotate(-0.5deg);}82%{transform:translate(-1px,0px) rotate(-0.5deg);}84%{transform:translate(0px,0px) rotate(-0.5deg);}86%{transform:translate(0px,-1px) rotate(-0.5deg);}88%{transform:translate(-1px,0px) rotate(-0.5deg);}90%{transform:translate(0px,0px) rotate(-0.5deg);}92%{transform:translate(-1px,0px) rotate(-0.5deg);}94%{transform:translate(-1px,-1px) rotate(-0.5deg);}96%{transform:translate(-1px,-1px) rotate(-0.5deg);}98%{transform:translate(-1px,-1px) rotate(-0.5deg);}}
		</style>
		<!--[if IE 6]>
			<script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
		<![endif]-->
	</head>
	<body>
	<!--[if IE 6]>
		<style>body,html{overflow:hidden;}</style>
		<div style="position:absolute;padding-left:40px;;width:100%;height:4009px;background:#000;top:0;left:0;z-index:11;"></div>
		<div style="position:absolute;width:400px;height:50px;line-height:50px;font-size:50px;font-weight:bold;color:#fff;z-index:12;top:50%;left:50%;margin-top:-25px;margin-left:-200px;">Let's kill IE 6!</DIV>
	<![endif]-->

	<div class="wraper index">
		<div class="content"  >
			<div class="main clearfix">
	<div class="article">
			<h1>@蜗眼</h1>
			<div>
				<p>这里是<strong>蜗眼</strong>同志在互联网上的一个栖息地，他好不容易才找到这样一个净土，就不要再驱赶他了吧！</p>	
				<p><strong>蜗眼</strong>  是一个刚出道不久的前端工程师，他入世不深还很菜，他有点高傲、有点自大。在这里我恳请大家原谅他的高傲、自大。</p>
				
<blockquote class="inr">现在的人变懒了，都不肯去造“轮子”，以至于越来越多的人只会使用轮子了。他们不知到这个轮子是如何产生的，更不知道这个轮子的所有细节以及制作这个轮子时所犯过的过错... 所以我推崇"独立思考制作轮子"的过程！</blockquote>

			</div>
	</div>
					<div class="article">
						<h2>关于我</h2>
						<div class="resume">
							<p>互联网花名<strong>蜗眼</strong>、88年出生于地球<p>
							<ul>
								<li><label>学习历程</label> @重庆师范大学（重庆，2007-2011）</li>
								<li><label>工作历程</label>
									@猪八戒威客网（重庆，2011-2012)<br/>
									@阿里巴巴-天猫（杭州，2012-2014）
								</li>
							</ul>
							<p>联系我：iceet[at]uoeye.com</p><p>[从蜗牛的眼睛里看世界，蜗牛虽小但眼内的世界同样五彩缤纷]</p>
						</div>
						
					</div>
			
					<div class="article">
						<div class="MeAbout">
						<h3>微项目</h3>
						<ul>
							<li><a href="https://github.com/CNEYE/Tiny" title="一个简单的基于smarty语法的模版函数" target="_blank">Tiny前端模版</a></li>
							<li><a href="https://github.com/CNEYE/Jot" target="_blank" title="一个简单实用的dom选择器">Jot微选择器</a></li>
							<li><a href="https://github.com/CNEYE/Highlight" title="一个简单实用的语法高亮函数" target="_blank">语法高亮器</a></li>
							<li><a href="https://github.com/CNEYE/cpuload" title="一个简单的跨终端的页面性能分析折线图工具" target="_blank">性能分析插件</a></li>
							<li><a href="https://github.com/CNEYE/iframeCross" target="_blank" title="一个iframe跨域双向通信解决方案">IFRAME无代理跨域通信</a></li>
						</ul>
						</div>
					</div>
					<div class="aside" title="作者：周育江" style="text-align:right;bottom:0px;top:auto"><span>《蜗眼》</span><br/>
时间一圈一圈<br/>
在旋转的轮子中消逝<br/>
你迷茫的眼<br/>
看不穿阳的彩幕<br/>
你恐惧极速的轮<br/>
宁愿做一只爬行的蜗牛<br/>
高耸的楼群<br/>
每天变化着身高<br/>
也不知那里<br/>
藏着谁的幸福<br/>
<br/>
晨阳走近夕阳<br/>
历史的记忆<br/>
不知觉间又增添一页<br/>
街边焦急的等待<br/>
如一条河流<br/>
只是没有了流动<br/>
装在铁盒子<br/>
发出无奈的呻吟<br/>
那是谁的眼<br/>
深邃、孤独、忧郁
						</div>
						<style>
							.content .main{position: relative}
							.content .main .aside{opacity:0.3}
							.content .main .aside:hover{opacity:1}
						</style>
</div>

<div class="new">最新文章</div>
<div class="article post">

	<h1>如何探测浏览器的繁忙程度</h1>
	
	<div class="article">
		<h2 id="section">浏览器的繁忙程度受哪些因素？</h2>
<ol>
  <li>资源加载时
    <ul>
      <li>页面渲染之前
        <ul>
          <li>可以判断为浏览器资源加载繁忙，domready之后就为资源加载空闲</li>
        </ul>
      </li>
      <li>页面渲染之后
        <ul>
          <li>如何判断？</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>dom树构建和渲染UI时、js运算时
    <ul>
      <li>原理资料：<a href="http://hi.baidu.com/821402834/item/950fadfa82b3fdbe31c199ca">浏览器的渲染机制</a>、<a href="http://www.doc88.com/p-707864123247.html">深入理解javascript定时机制</a> 、<a href="http://msdn.microsoft.com/zh-cn/library/ie/hh920765(v=vs.85).aspx">requestAnimationFrame 函数介绍</a></li>
      <li>浏览器内核中javascript引擎线程和界面渲染线程是互斥的，即<strong>其中一个运行的时候另一个将会挂起</strong>。</li>
      <li>调用setTimeout、setInterval会将该“任务”放到javascript的执行队列之后（<strong>排队</strong>）</li>
      <li>setTimeout和requestAnimationFrame 的一些区别
        <ul>
          <li>回调函数执行时间：requestAnimationFrame 在浏览器需要<strong>更新页面显示</strong>时（而且仅在这种情况下）获得通知，而setTimeout函数是在javascript执行队列执行到该回调“任务”的时候才会获得通知</li>
          <li>requestAnimationFrame 在浏览器最小化不会有通知</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="section-1">如何判断浏览器资源加载繁忙状态</h2>
<ol>
  <li>方案（仅仅是方案，没有验证）
    <ul>
      <li>通过网速判断
        <ul>
          <li>通过加载一个资源的前后时间差，判断是否有大量资源在下载</li>
        </ul>
      </li>
      <li>通过hooks浏览器支援操作函数、类（appendChild、Image，Audio），配合domready
        <ul>
          <li>在浏览器发生该类有可能产生支援请求的函数、类的调用的时候监听支援的加载、完成情况。</li>
        </ul>
      </li>
      <li>更好的方案 for what？</li>
    </ul>
  </li>
</ol>

<h2 id="section-2">如何从侧面判断浏览器繁忙程度 (非资源)</h2>
<ol>
  <li>按道理 setInterval,requestAnimationFrame函数的执行时间间隔应该固定，我们希望的理论状态。但是在通常情况下，这个执行时间间隔是存在延迟的。
    <ul>
      <li>WHY？
        <ul>
          <li>当浏览器渲染的时候（界面渲染线程时间）会冻结javascript解析线程，javascript执行队列也就挂起了。</li>
          <li>当js执行的时候（javascript解析线程时间）会冻结界面渲染线程，requestAnimationFrame的获得通知的时间也就挂起了。</li>
          <li>如果界面渲染比较繁忙或则JS执行比较繁忙。则相应的javascript解析线程、界面渲染线程的挂起时间就会更久了。</li>
        </ul>
      </li>
      <li>HOW ？ 
        <ul>
          <li>尝试用setInterval，和requestAnimationFrame函数的执行延迟时间来侧面体现浏览器  dom树构建和渲染UI 和 JS执行渲染的繁忙程度。</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

		<div class="aside">
			<ul>	
				<li>时间: April Apr, 2013</li>
				<li>分类：article</li>
				<li>标签：浏览器、性能</li>
			</ul>
		</div>
	</div>

</div>
<div class="alist article">
	<h3>文章列表</h3>
	<ul>
		
			<li><a href="/article/2013/04/07/browser_performance.html" >如何探测浏览器的繁忙程度</a>
			</li>
		
			<li><a href="/article/2012/11/17/emitter.html" >什么是事件广播（Emitter）</a>
			</li>
		
			<li><a href="/article/2012/11/16/deferred.html" >什么是延迟列表（Deferred）</a>
			</li>
		
			<li><a href="/article/2012/11/15/engine.html" >HTML5 游戏引擎列表</a>
			</li>
		
	</ul>
</div>

			<div class="footer">
				Copyright © 2014 所有文字内容在CC-by-sa-3.0协议下发布。
			</div>
		</div>
<script src="./assets/script/main.js" type="text/javascript"></script>
<script type="text/javascript">  
	Highlighter.HighlightAll();
</script>
<div id="fly" style="bottom:-109px;" class="flying" title="到顶部"></div>

</body>
</html>

