<!doctype html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
		<meta name="author" content="uoeye" />
		<meta name="keywords" content="前端工程师 蜗眼" />	
		<meta name="description" content="前端工程师蜗眼，关注尖端前端技术，关注虚拟3DSNS" />
		<meta http-equiv="imagetoolbar" content="no" />
		<meta name="title" content="蜗眼的文章列表" />
		<title>@uoeye</title>
		<link rel="stylesheet" href="css/style.css"/>
		<script type="text/javascript" src="js/base.js" ></script>
	</head>
	<body>
		<div id="container">
			<div id="header">
				<h1 title="@蜗眼">@uoeye</h1>
			</div>
			<div id="nav">
				<ul>
					<li><a href="/" title="首页">HOME >></a></li>
					<li><a href="/about.html" title="关于我">ABOUT ME</a></li>
					<li><a href="/links.html" title = "链接">LINKS</a></li>
					<li><a href="/projects.html" title="我的项目">PROJECTS</a></li>
					<li><a href="/labs/" title="我的实验室">LABS</a></li>
				</ul>
			</div>
			<div id="article">
				<p>正在加载...</p>
			</div>
		</div>
		<script id="index-tmpl" type="text/tmpl">
			{/foreach ($data as $one)/}
			<dl>
				<dt><h2>{/=one.title/}</h2></dt>
				{/foreach (one.content as $item)/}
				<dd><span>{/include plugin=actname data=$item.time/}</span>{/include plugin=actlink data=$item/}
				{//foreach/}
			</dl>
			{//foreach/}
		</script>
		<script>
			JSmart.plugin('actname',function(value){
				return (''+value).replace(/^\d+\//,'');
			});
			JSmart.plugin('actlink',function(value){
				var html=['<a href="'];
				html.push( '/html/'+value.time+'.html');
				html.push('" title="');
				html.push(value.title);
				html.push('">');
				html.push(value.title);
				html.push('</a>');
				return html.join('')
			});
			
			var smart = JSmart(document.getElementById('index-tmpl').innerHTML);
			
			ajax({
				url  : '/html/index',
				type : 'get',
				success : function(data){
					data.sort(function(a,b){
						if(a.title>b.title)return -1;
						if(a.title<b.title)return 1;
						return 0;
					});
					
					for(var len = data.length-1;len>=0;len--){
						data[len]['content'].sort(function(a,b){
							if(a.time>b.time)return -1;
							if(a.time<b.time)return 1;
							return 0;
						});
					}
					var html = smart({data:data});
					document.getElementById('article').innerHTML = html;
				}
			});
		</script>
	</body>
</html>
